import{d as le,Q as K,r as u,R as ae,w as T,o as se,f as te,i as o,c as s,U as E,I as B,W as oe,l,j as ie}from"./index-19627c6f.js";import{u as q}from"./client-d92f7aa8.js";import{u as z}from"./region-66ba9fe3.js";import{u as G}from"./ews-device-004ac032.js";import{V as r,a as re,d as H,f}from"./VTextField-3c136c46.js";import{V as de}from"./VForm-9c2cc0e3.js";import{a as V,V as ue}from"./VTextarea-78ec0b37.js";import"./VGrid-811bdf3a.js";import"./VSelect-8d815467.js";import"./VMenu-c409457e.js";import"./VOverlay-f5a0fce8.js";const me=ie("h2",{class:"mb-0"}," Ubah Client ",-1),Ue={__name:"edit-client",setup(ne){const J=le(),{loading:L,error:a}=K(q()),{fetchClient:O,updateClient:X}=q(),{ewsDevices:Y}=K(G()),{fetchEwsDevices:Z}=G();Z();const{provinces:x,regencies:N,districts:h,subdistricts:R}=K(z()),{fetchProvinces:P,fetchRegencies:k,fetchDistricts:A,fetchSubdistricts:j}=z();P();const F=J.params.id,g=u(""),b=u(""),S=u(""),D=u(""),c=u(""),v=u(""),p=u(""),w=u(""),_=u(""),C=u(""),I=u(!0),y=u([]),M=async()=>{var m,t,e,U;try{const i=await O(F);g.value=i.code,b.value=i.name,S.value=i.email,c.value=(m=x.value.find(d=>d.name===i.province))==null?void 0:m.id,await k(c.value),v.value=(t=N.value.find(d=>d.name===i.regency))==null?void 0:t.id,await A(v.value),p.value=(e=h.value.find(d=>d.name===i.district))==null?void 0:e.id,await j(p.value),w.value=(U=R.value.find(d=>d.name===i.subdistrict))==null?void 0:U.id,_.value=i.address,C.value=i.phone,I.value=!!i.is_active,y.value=i.ews_devices.map(d=>d.id)}catch(i){console.error(i)}};ae(()=>{M(),document.title="Ubah Client"});const $=()=>{var i,d,W,Q;const m=(i=x.value.find(n=>n.id===c.value))==null?void 0:i.name,t=(d=N.value.find(n=>n.id===v.value))==null?void 0:d.name,e=(W=h.value.find(n=>n.id===p.value))==null?void 0:W.name,U=(Q=R.value.find(n=>n.id===w.value))==null?void 0:Q.name;X({id:F,code:g.value,name:b.value,password:D.value,province:m,regency:t,district:e,subdistrict:U,address:_.value,phone:C.value,is_active:I.value,ews_devices:y.value})};P(),T(c,m=>{k(m)}),T(v,m=>{A(m)}),T(p,m=>{j(m)});const ee=()=>{M()};return(m,t)=>(se(),te(H,null,{default:o(()=>[s(r,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[me,s(E,{to:{name:"app-client"},color:"primary"},{default:o(()=>[B(" Kembali ")]),_:1})]),_:1}),s(r,{cols:"12"},{default:o(()=>[s(re,null,{default:o(()=>[s(de,{onSubmit:oe($,["prevent"])},{default:o(()=>[s(H,null,{default:o(()=>[s(r,{cols:"12",md:"6"},{default:o(()=>[s(f,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),label:"Kode",placeholder:"Kode Client","error-messages":l(a)&&l(a).code?[l(a).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(f,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),label:"Nama",placeholder:"Nama Client","error-messages":l(a)&&l(a).name?[l(a).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(f,{modelValue:S.value,"onUpdate:modelValue":t[2]||(t[2]=e=>S.value=e),label:"Email",placeholder:"Email Client","error-messages":l(a)&&l(a).email?[l(a).email]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(f,{modelValue:D.value,"onUpdate:modelValue":t[3]||(t[3]=e=>D.value=e),label:"Password",placeholder:"Password Client","error-messages":l(a)&&l(a).password?[l(a).password]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(V,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),label:"Provinsi",items:l(x),"error-messages":l(a)&&l(a).province?[l(a).province]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(V,{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=e=>v.value=e),label:"Kabupaten/Kota",items:l(N),"error-messages":l(a)&&l(a).regency?[l(a).regency]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(V,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=e=>p.value=e),label:"Kecamatan",items:l(h),"error-messages":l(a)&&l(a).district?[l(a).district]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(V,{modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=e=>w.value=e),label:"Kelurahan/Desa",items:l(R),"error-messages":l(a)&&l(a).subdistrict?[l(a).subdistrict]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"12"},{default:o(()=>[s(ue,{modelValue:_.value,"onUpdate:modelValue":t[8]||(t[8]=e=>_.value=e),label:"Alamat",placeholder:"Alamat Client","error-messages":l(a)&&l(a).address?[l(a).address]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(f,{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=e=>C.value=e),label:"Telepon",placeholder:"Telepon Client","error-messages":l(a)&&l(a).phone?[l(a).phone]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(V,{modelValue:y.value,"onUpdate:modelValue":t[10]||(t[10]=e=>y.value=e),label:"EWS Device",items:l(Y),"error-messages":l(a)&&l(a).ews_devices?[l(a).ews_devices]:[],"item-title":e=>e.name,"item-value":e=>e.id,multiple:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[s(E,{type:"submit",loading:l(L),color:"primary"},{default:o(()=>[B(" Simpan ")]),_:1},8,["loading"]),s(E,{color:"secondary",variant:"tonal",onClick:ee},{default:o(()=>[B(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ue as default};
