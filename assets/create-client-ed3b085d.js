import{Q as y,r as m,R as L,Z as X,w as T,o as Y,f as $,i as o,c as s,U as x,I as N,W as ee,l,j as le}from"./index-19627c6f.js";import{u as k}from"./client-d92f7aa8.js";import{u as j}from"./region-66ba9fe3.js";import{u as F}from"./ews-device-004ac032.js";import{V as r,a as ae,d as M,f as c}from"./VTextField-3c136c46.js";import{V as se}from"./VForm-9c2cc0e3.js";import{a as p,V as te}from"./VTextarea-78ec0b37.js";import"./VGrid-811bdf3a.js";import"./VSelect-8d815467.js";import"./VMenu-c409457e.js";import"./VOverlay-f5a0fce8.js";const oe=le("h2",{class:"mb-0"}," Tambah Client ",-1),be={__name:"create-client",setup(re){const{loading:O,error:a}=y(k()),{createClient:W}=k(),{ewsDevices:I}=y(F()),{fetchEwsDevices:Q}=F();Q();const{provinces:S,regencies:K,districts:R,subdistricts:D}=y(j()),{fetchProvinces:Z,fetchRegencies:q,fetchDistricts:z,fetchSubdistricts:G}=j();Z();const f=m("AUTO"),V=m(""),g=m(""),b=m(""),d=m(""),n=m(""),v=m(""),_=m(""),w=m(""),C=m(""),U=m([]),A=()=>{f.value="AUTO",V.value="",g.value="",b.value="",d.value="",n.value="",v.value="",_.value="",w.value="",C.value="",U.value=[]},H=()=>{var E,h,B,P;const i=(E=S.value.find(u=>u.id===d.value))==null?void 0:E.name,t=(h=K.value.find(u=>u.id===n.value))==null?void 0:h.name,e=(B=R.value.find(u=>u.id===v.value))==null?void 0:B.name,J=(P=D.value.find(u=>u.id===_.value))==null?void 0:P.name;W({code:f.value,name:V.value,email:g.value,password:b.value,province:i,regency:t,district:e,subdistrict:J,address:w.value,phone:C.value,is_active:1,ews_devices:U.value})};return L(()=>{document.title="Tambah Client"}),X(()=>{A(),a.value=null}),T(d,i=>{q(i)}),T(n,i=>{z(i)}),T(v,i=>{G(i)}),(i,t)=>(Y(),$(M,null,{default:o(()=>[s(r,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[oe,s(x,{to:"/admin/client",color:"primary"},{default:o(()=>[N(" Kembali ")]),_:1})]),_:1}),s(r,{cols:"12"},{default:o(()=>[s(ae,null,{default:o(()=>[s(se,{onSubmit:ee(H,["prevent"])},{default:o(()=>[s(M,null,{default:o(()=>[s(r,{cols:"12",md:"6"},{default:o(()=>[s(c,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),label:"Kode",placeholder:"Kode Client","error-messages":l(a)&&l(a).code?[l(a).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(c,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value=e),label:"Nama",placeholder:"Nama Client","error-messages":l(a)&&l(a).name?[l(a).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(c,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),label:"Email",placeholder:"Email Client","error-messages":l(a)&&l(a).email?[l(a).email]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(c,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=e=>b.value=e),label:"Password",placeholder:"Password Client","error-messages":l(a)&&l(a).password?[l(a).password]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(p,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value=e),label:"Provinsi",items:l(S),"error-messages":l(a)&&l(a).province?[l(a).province]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(p,{modelValue:n.value,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value=e),label:"Kabupaten/Kota",items:l(K),"error-messages":l(a)&&l(a).regency?[l(a).regency]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(p,{modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=e=>v.value=e),label:"Kecamatan",items:l(R),"error-messages":l(a)&&l(a).district?[l(a).district]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(p,{modelValue:_.value,"onUpdate:modelValue":t[7]||(t[7]=e=>_.value=e),label:"Kelurahan/Desa",items:l(D),"error-messages":l(a)&&l(a).subdistrict?[l(a).subdistrict]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",md:"12"},{default:o(()=>[s(te,{modelValue:w.value,"onUpdate:modelValue":t[8]||(t[8]=e=>w.value=e),label:"Alamat",placeholder:"Alamat Client","error-messages":l(a)&&l(a).address?[l(a).address]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(c,{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=e=>C.value=e),label:"Telepon",placeholder:"Telepon Client","error-messages":l(a)&&l(a).phone?[l(a).phone]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(r,{cols:"12",md:"6"},{default:o(()=>[s(p,{modelValue:U.value,"onUpdate:modelValue":t[10]||(t[10]=e=>U.value=e),label:"EWS Device",items:l(I),"error-messages":l(a)&&l(a).ews_devices?[l(a).ews_devices]:[],"item-title":e=>e.name,"item-value":e=>e.id,multiple:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),s(r,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[s(x,{type:"submit",loading:l(O),color:"primary"},{default:o(()=>[N(" Simpan ")]),_:1},8,["loading"]),s(x,{color:"secondary",variant:"tonal",onClick:A},{default:o(()=>[N(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{be as default};
