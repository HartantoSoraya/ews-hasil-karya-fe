import{m as Me,u as Ae,a as Re,b as _e,c as De}from"./VSelect-8d815467.js";import{m as Te,u as Ke,f as xe,g as Le,h as Oe,i as pe,j as Ve,k as Be,l as Ne,n as Ee}from"./VTextField-3c136c46.js";import{p as he,r as K,A as b,l as ee,a7 as Se,a8 as me,a9 as Ue,C as ze,g as be,aa as He,z as Z,D as re,ab as je,w as B,a4 as te,a3 as Ge,u as Ie,c as a,K as J,F as p,V as we,ac as $e,a5 as Qe,I as We,ad as Je,ae as Fe,R as Xe,S as Ye,af as Ze,L as ke,a2 as qe,ag as et,ah as tt,ai as lt,aj as at}from"./index-19627c6f.js";import{m as nt,V as ut,f as Pe,I as ot}from"./VGrid-811bdf3a.js";import{u as it,V as rt,a as st,b as Ce}from"./VMenu-c409457e.js";const ct=(e,d,t)=>e==null||d==null?-1:e.toString().toLocaleLowerCase().indexOf(d.toString().toLocaleLowerCase()),ft=he({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function dt(e,d,t){var _;const x=[],f=(t==null?void 0:t.default)??ct,s=t!=null&&t.filterKeys?me(t.filterKeys):!1,h=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return x;e:for(let V=0;V<e.length;V++){const[P,L=P]=me(e[V]),c={},u={};let g=-1;if(d&&!(t!=null&&t.noFilter)){if(typeof P=="object"){const z=s||Object.keys(L);for(const A of z){const X=Ue(L,A),H=(_=t==null?void 0:t.customKeyFilter)==null?void 0:_[A];if(g=H?H(X,d,P):f(X,d,P),g!==-1&&g!==!1)H?c[A]=g:u[A]=g;else if((t==null?void 0:t.filterMode)==="every")continue e}}else g=f(P,d,P),g!==-1&&g!==!1&&(u.title=g);const D=Object.keys(u).length,M=Object.keys(c).length;if(!D&&!M||(t==null?void 0:t.filterMode)==="union"&&M!==h&&!D||(t==null?void 0:t.filterMode)==="intersection"&&(M!==h||!D))continue}x.push({index:V,matches:{...u,...c}})}return x}function vt(e,d,t,x){const f=K([]),s=K(new Map),h=b(()=>x!=null&&x.transform?ee(d).map(V=>[V,x.transform(V)]):ee(d));Se(()=>{const V=typeof t=="function"?t():ee(t),P=typeof V!="string"&&typeof V!="number"?"":String(V),L=dt(h.value,P,{customKeyFilter:{...e.customKeyFilter,...ee(x==null?void 0:x.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),c=ee(d),u=[],g=new Map;L.forEach(D=>{let{index:M,matches:z}=D;const A=c[M];u.push(A),g.set(A.value,z)}),f.value=u,s.value=g});function _(V){return s.value.get(V.value)}return{filteredItems:f,filteredMatches:s,getMatches:_}}function mt(e,d,t){if(d==null)return e;if(Array.isArray(d))throw new Error("Multiple matches is not implemented");return typeof d=="number"&&~d?a(J,null,[a("span",{class:"v-autocomplete__unmask"},[e.substr(0,d)]),a("span",{class:"v-autocomplete__mask"},[e.substr(d,t)]),a("span",{class:"v-autocomplete__unmask"},[e.substr(d+t)])]):e}const ht=he({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...ft({filterKeys:["title"]}),...Me(),...ze(Te({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...nt({transition:!1})},"VAutocomplete"),kt=be()({name:"VAutocomplete",props:ht(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,d){let{slots:t}=d;const{t:x}=He(),f=K(),s=Z(!1),h=Z(!0),_=Z(!1),V=K(),P=K(),L=re(e,"menu"),c=b({get:()=>L.value,set:l=>{var n;L.value&&!l&&((n=V.value)!=null&&n.Î¨openChildren)||(L.value=l)}}),u=Z(-1),g=b(()=>{var l;return(l=f.value)==null?void 0:l.color}),D=b(()=>c.value?e.closeText:e.openText),{items:M,transformIn:z,transformOut:A}=it(e),{textColorClasses:X,textColorStyles:H}=je(g),w=re(e,"search",""),r=re(e,"modelValue",[],l=>z(l===null?[null]:me(l)),l=>{const n=A(l);return e.multiple?n:n[0]??null}),N=b(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:r.value.length),T=Ke(),{filteredItems:j,getMatches:E}=vt(e,M,()=>h.value?"":w.value),y=b(()=>e.hideSelected?j.value.filter(l=>!r.value.some(n=>n.value===l.value)):j.value),i=b(()=>!!(e.chips||t.chip)),C=b(()=>i.value||!!t.selection),S=b(()=>r.value.map(l=>l.props.value)),I=b(()=>{var n;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&w.value===((n=y.value[0])==null?void 0:n.title))&&y.value.length>0&&!h.value&&!_.value}),U=b(()=>e.hideNoData&&!y.value.length||e.readonly||(T==null?void 0:T.isReadonly.value)),G=K(),{onListScroll:q,onListKeydown:O}=Ae(G,f);function Y(l){e.openOnClear&&(c.value=!0),w.value=""}function le(){U.value||(c.value=!0)}function ae(l){U.value||(s.value&&(l.preventDefault(),l.stopPropagation()),c.value=!c.value)}function se(l){var o,v,R;if(e.readonly||T!=null&&T.isReadonly.value)return;const n=f.value.selectionStart,m=r.value.length;if((u.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(c.value=!0),["Escape"].includes(l.key)&&(c.value=!1),I.value&&["Enter","Tab"].includes(l.key)&&$(y.value[0]),l.key==="ArrowDown"&&I.value&&((o=G.value)==null||o.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(l.key)){if(u.value<0){l.key==="Backspace"&&!w.value&&(u.value=m-1);return}const k=u.value,F=r.value[u.value];F&&!F.props.disabled&&$(F,!1),u.value=k>=m-1?m-2:k}if(l.key==="ArrowLeft"){if(u.value<0&&n>0)return;const k=u.value>-1?u.value-1:m-1;r.value[k]?u.value=k:(u.value=-1,f.value.setSelectionRange((v=w.value)==null?void 0:v.length,(R=w.value)==null?void 0:R.length))}if(l.key==="ArrowRight"){if(u.value<0)return;const k=u.value+1;r.value[k]?u.value=k:(u.value=-1,f.value.setSelectionRange(0,0))}}}function ce(l){if(Fe(f.value,":autofill")||Fe(f.value,":-webkit-autofill")){const n=M.value.find(m=>m.title===l.target.value);n&&$(n)}}function fe(){var l;s.value&&(h.value=!0,(l=f.value)==null||l.focus())}function ne(l){s.value=!0,setTimeout(()=>{_.value=!0})}function ue(l){_.value=!1}function de(l){(l==null||l===""&&!e.multiple)&&(r.value=[])}const ve=Z(!1);function $(l){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const m=r.value.findIndex(v=>e.valueComparator(v.value,l.value)),o=n??!~m;if(~m){const v=o?[...r.value,l]:[...r.value];v.splice(m,1),r.value=v}else o&&(r.value=[...r.value,l]);e.clearOnSelect&&(w.value="")}else{const m=n!==!1;r.value=m?[l]:[],w.value=m&&!C.value?l.title:"",te(()=>{c.value=!1,h.value=!0})}}return B(s,(l,n)=>{var m;l!==n&&(l?(ve.value=!0,w.value=e.multiple||C.value?"":String(((m=r.value.at(-1))==null?void 0:m.props.title)??""),h.value=!0,te(()=>ve.value=!1)):(!e.multiple&&w.value==null?r.value=[]:I.value&&!_.value&&!r.value.some(o=>{let{value:v}=o;return v===y.value[0].value})&&$(y.value[0]),c.value=!1,w.value="",u.value=-1))}),B(w,l=>{!s.value||ve.value||(l&&(c.value=!0),h.value=!l)}),B(c,()=>{if(!e.hideSelected&&c.value&&r.value.length){const l=y.value.findIndex(n=>r.value.some(m=>n.value===m.value));Ge&&window.requestAnimationFrame(()=>{var n;l>=0&&((n=P.value)==null||n.scrollToIndex(l))})}}),B(()=>e.items,(l,n)=>{c.value||s.value&&!n.length&&l.length&&(c.value=!0)}),Ie(()=>{const l=!!(!e.hideNoData||y.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),n=r.value.length>0,m=xe.filterProps(e);return a(xe,p({ref:f},m,{modelValue:w.value,"onUpdate:modelValue":[o=>w.value=o,de],focused:s.value,"onUpdate:focused":o=>s.value=o,validationValue:r.externalValue,counterValue:N.value,dirty:n,onChange:ce,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":c.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!C.value,"v-autocomplete--selecting-index":u.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:n?void 0:e.placeholder,"onClick:clear":Y,"onMousedown:control":le,onKeydown:se}),{...t,default:()=>a(J,null,[a(rt,p({ref:V,modelValue:c.value,"onUpdate:modelValue":o=>c.value=o,activator:"parent",contentClass:"v-autocomplete__content",disabled:U.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:fe},e.menuProps),{default:()=>[l&&a(st,p({ref:G,selected:S.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onKeydown:O,onFocusin:ne,onFocusout:ue,onScrollPassive:q,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var o,v,R;return[(o=t["prepend-item"])==null?void 0:o.call(t),!y.value.length&&!e.hideNoData&&(((v=t["no-data"])==null?void 0:v.call(t))??a(Ce,{title:x(e.noDataText)},null)),a(Re,{ref:P,renderless:!0,items:y.value},{default:k=>{var ye;let{item:F,index:Q,itemRef:W}=k;const ge=p(F.props,{ref:W,key:Q,active:I.value&&Q===0?!0:void 0,onClick:()=>$(F,null)});return((ye=t.item)==null?void 0:ye.call(t,{item:F,index:Q,props:ge}))??a(Ce,p(ge,{role:"option"}),{prepend:oe=>{let{isSelected:ie}=oe;return a(J,null,[e.multiple&&!e.hideSelected?a(_e,{key:F.value,modelValue:ie,ripple:!1,tabindex:"-1"},null):void 0,F.props.prependAvatar&&a(ut,{image:F.props.prependAvatar},null),F.props.prependIcon&&a(we,{icon:F.props.prependIcon},null)])},title:()=>{var oe,ie;return h.value?F.title:mt(F.title,(oe=E(F))==null?void 0:oe.title,((ie=w.value)==null?void 0:ie.length)??0)}})}}),(R=t["append-item"])==null?void 0:R.call(t)]}})]}),r.value.map((o,v)=>{function R(W){W.stopPropagation(),W.preventDefault(),$(o,!1)}const k={"onClick:close":R,onMousedown(W){W.preventDefault(),W.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},F=i.value?!!t.chip:!!t.selection,Q=F?$e(i.value?t.chip({item:o,index:v,props:k}):t.selection({item:o,index:v})):void 0;if(!(F&&!Q))return a("div",{key:o.value,class:["v-autocomplete__selection",v===u.value&&["v-autocomplete__selection--selected",X.value]],style:v===u.value?H.value:{}},[i.value?t.chip?a(Qe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>[Q]}):a(De,p({key:"chip",closable:e.closableChips,size:"small",text:o.title,disabled:o.props.disabled},k),null):Q??a("span",{class:"v-autocomplete__selection-text"},[o.title,e.multiple&&v<r.value.length-1&&a("span",{class:"v-autocomplete__selection-comma"},[We(",")])])])})]),"append-inner":function(){var k;for(var o=arguments.length,v=new Array(o),R=0;R<o;R++)v[R]=arguments[R];return a(J,null,[(k=t["append-inner"])==null?void 0:k.call(t,...v),e.menuIcon?a(we,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:ae,onClick:Je,"aria-label":x(D.value),title:x(D.value)},null):void 0])}})}),Pe({isFocused:s,isPristine:h,menu:c,search:w,filteredItems:j,select:$},f)}});const gt=he({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Le(),...Oe()},"VTextarea"),Ct=be()({name:"VTextarea",directives:{Intersect:ot},inheritAttrs:!1,props:gt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,d){let{attrs:t,emit:x,slots:f}=d;const s=re(e,"modelValue"),{isFocused:h,focus:_,blur:V}=pe(e),P=b(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),L=b(()=>{if(t.maxlength)return t.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function c(i,C){var S,I;!e.autofocus||!i||(I=(S=C[0].target)==null?void 0:S.focus)==null||I.call(S)}const u=K(),g=K(),D=Z(""),M=K(),z=b(()=>e.persistentPlaceholder||h.value||e.active);function A(){var i;M.value!==document.activeElement&&((i=M.value)==null||i.focus()),h.value||_()}function X(i){A(),x("click:control",i)}function H(i){x("mousedown:control",i)}function w(i){i.stopPropagation(),A(),te(()=>{s.value="",tt(e["onClick:clear"],i)})}function r(i){var S;const C=i.target;if(s.value=C.value,(S=e.modelModifiers)!=null&&S.trim){const I=[C.selectionStart,C.selectionEnd];te(()=>{C.selectionStart=I[0],C.selectionEnd=I[1]})}}const N=K(),T=K(+e.rows),j=b(()=>["plain","underlined"].includes(e.variant));Se(()=>{e.autoGrow||(T.value=+e.rows)});function E(){e.autoGrow&&te(()=>{if(!N.value||!g.value)return;const i=getComputedStyle(N.value),C=getComputedStyle(g.value.$el),S=parseFloat(i.getPropertyValue("--v-field-padding-top"))+parseFloat(i.getPropertyValue("--v-input-padding-top"))+parseFloat(i.getPropertyValue("--v-field-padding-bottom")),I=N.value.scrollHeight,U=parseFloat(i.lineHeight),G=Math.max(parseFloat(e.rows)*U+S,parseFloat(C.getPropertyValue("--v-input-control-height"))),q=parseFloat(e.maxRows)*U+S||1/0,O=at(I??0,G,q);T.value=Math.floor((O-S)/U),D.value=lt(O)})}Xe(E),B(s,E),B(()=>e.rows,E),B(()=>e.maxRows,E),B(()=>e.density,E);let y;return B(N,i=>{i?(y=new ResizeObserver(E),y.observe(N.value)):y==null||y.disconnect()}),Ye(()=>{y==null||y.disconnect()}),Ie(()=>{const i=!!(f.counter||e.counter||e.counterValue),C=!!(i||f.details),[S,I]=Ze(t),{modelValue:U,...G}=Ve.filterProps(e),q=Be(e);return a(Ve,p({ref:u,modelValue:s.value,"onUpdate:modelValue":O=>s.value=O,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":j.value},e.class],style:e.style},S,G,{centerAffix:T.value===1&&!j.value,focused:h.value}),{...f,default:O=>{let{id:Y,isDisabled:le,isDirty:ae,isReadonly:se,isValid:ce}=O;return a(Ne,p({ref:g,style:{"--v-textarea-control-height":D.value},onClick:X,onMousedown:H,"onClick:clear":w,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},q,{id:Y.value,active:z.value||ae.value,centerAffix:T.value===1&&!j.value,dirty:ae.value||e.dirty,disabled:le.value,focused:h.value,error:ce.value===!1}),{...f,default:fe=>{let{props:{class:ne,...ue}}=fe;return a(J,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),ke(a("textarea",p({ref:M,class:ne,value:s.value,onInput:r,autofocus:e.autofocus,readonly:se.value,disabled:le.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:A,onBlur:V},ue,I),null),[[qe("intersect"),{handler:c},null,{once:!0}]]),e.autoGrow&&ke(a("textarea",{class:[ne,"v-textarea__sizer"],id:`${ue.id}-sizer`,"onUpdate:modelValue":de=>s.value=de,ref:N,readonly:!0,"aria-hidden":"true"},null),[[et,s.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:C?O=>{var Y;return a(J,null,[(Y=f.details)==null?void 0:Y.call(f,O),i&&a(J,null,[a("span",null,null),a(Ee,{active:e.persistentCounter||h.value,value:P.value,max:L.value},f.counter)])])}:void 0})}),Pe({},u,g,M)}});export{Ct as V,kt as a};
