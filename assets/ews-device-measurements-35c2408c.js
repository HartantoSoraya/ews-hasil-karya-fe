import{u as f}from"./ews-device-measurement-36a41368.js";import{u as g}from"./ews-device-004ac032.js";import{r as u,Q as V,R as U,Z as B,e as x,o as N,J as j,c as e,i as t,l as s,s as v,j as _,V as F,I as G,K as H}from"./index-19627c6f.js";import{V as o,f as h,d as D,a as b}from"./VTextField-3c136c46.js";import{V as I}from"./VSelect-8d815467.js";import"./VGrid-811bdf3a.js";import"./VMenu-c409457e.js";import"./VOverlay-f5a0fce8.js";const L=_("h2",{class:"mb-0"}," Log Pengukuran EWS Device ",-1),P={id:"chart"},Y={__name:"ews-device-measurements",setup(W){const w=[{text:"Tanggal",align:"start",sortable:!1,value:"created_at"},{text:"Getaran",value:"vibration_value"},{text:"Suara",value:"db_value"}],i=u(null),r=u(null),d=u(null),c=u([]),m=u({chart:{type:"area",height:350},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{type:"datetime",categories:[]},tooltip:{x:{format:"dd/MM/yy HH:mm"}}}),{ewsDeviceMeasurments:n,loading:y,error:E,success:A}=V(f()),{fetchEwsDeviceMeasurements:T}=f(),S=async()=>{const p={device_id:i.value,start_date:r.value,end_date:d.value};await T(p),c.value=[{name:"Getaran",data:n.value.map(a=>[new Date(a.created_at).getTime(),a.vibration_value])},{name:"Suara",data:n.value.map(a=>[new Date(a.created_at).getTime(),a.db_value])}],m.value.xaxis.categories=n.value.map(a=>a.created_at)},{ewsDevices:M}=V(g()),{fetchEwsDevices:C}=g();return C(),U(()=>{document.title="EWS Device",n.value=[],c.value=[],m.value.xaxis.categories=[]}),B(()=>{E.value=null}),(p,a)=>{const k=x("EasyDataTable"),R=x("apexchart");return N(),j(H,null,[e(D,null,{default:t(()=>[e(o,{cols:"12",md:"5"},{default:t(()=>[e(I,{modelValue:s(i),"onUpdate:modelValue":a[0]||(a[0]=l=>v(i)?i.value=l:null),items:s(M),"item-title":l=>l.name,"item-value":l=>l.id,label:"Pilih Device",variant:"solo"},null,8,["modelValue","items","item-title","item-value"])]),_:1}),e(o,{cols:"12",md:"3"},{default:t(()=>[e(h,{modelValue:s(r),"onUpdate:modelValue":a[1]||(a[1]=l=>v(r)?r.value=l:null),label:"Dari Tanggal",type:"date",variant:"solo"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",md:"3"},{default:t(()=>[e(h,{modelValue:s(d),"onUpdate:modelValue":a[2]||(a[2]=l=>v(d)?d.value=l:null),label:"Sampai Tanggal",type:"date",variant:"solo"},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",md:"1"},{default:t(()=>[_("button",{class:"btn-search",onClick:S},[e(F,null,{default:t(()=>[G(" mdi-magnify ")]),_:1})])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:t(()=>[L]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[e(k,{headers:w,items:s(n),loading:s(y),"buttons-pagination":"","show-index":"",class:"data-table"},null,8,["items","loading"])]),_:1})]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(b,null,{default:t(()=>[_("div",P,[e(R,{type:"area",height:"350",options:s(m),series:s(c)},null,8,["options","series"])])]),_:1})]),_:1})]),_:1})],64)}}};export{Y as default};
